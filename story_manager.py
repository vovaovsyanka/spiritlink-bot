from typing import Dict, Any

class StoryManager:
    """Управление историями и текстами для каждого уровня"""
    
    @staticmethod
    def get_intro_part1() -> str:
        return (
            "Загрузка интерфейса «SpiritLink v.1.0»...\n"
            "Установка связи... Успешно.\n\n"
            "Ты очнулся. Перед глазами — мерцающий терминал. Сквозь шум помех проступает голос наставника, старого мастера Элиаса.\n\n"
            "«Проснись, неофит. Мир, который видят обычные люди — лишь тонкая пленка. Под ней — Царство Эха, место, где застряли потерянные души. Они питаются нашей энергией, порождают хаос. Твоя задача — находить их и освобождать, узнавая Слово-Якорь. Это то, что держит их в нашем мире: обида, клятва, память... Узнай Слово — произнеси его, и дух обретет покой.\n\n"
            "Каждый дух сильнее предыдущего. Они научились скрывать свои якоря. Будь хитер, задавай правильные вопросы. Используй «SpiritLink». И помни: некоторые духи... ждали тебя особо.»\n\n"
            "Голос обрывается. На экране — первый сигнал. Слабый, но настойчивый."
        )
    
    @staticmethod
    def get_intro_part2() -> str:
        return (
            "Тебе предстоит пройти 10 уровней, каждый из которых — дух со своей историей. "
            "Освобождая их, ты узнаешь больше о Царстве Эха и о том, кто стоит за его нарушением."
        )
    
    @staticmethod
    def get_level_story(level: int) -> Dict[str, Any]:
        stories = {
            1: {
                "name": "Уровень 1: Дух Заброшенного Театра",
                "story": (
                    "Дух: Меланхоличный Клоун Пьеро.\n\n"
                    "Он был комиком, который умер на сцене от сердечного приступа прямо в момент гробовой тишины после провальной шутки. "
                    "Его дух жаждал хоть одного искреннего смеха или аплодисментов, которых он так и не дождался."
                ),
                "completion_message": (
                    "Освободив его, вы находите первую Руну и слышите шепот: "
                    "«Он собирает нас... будь осторожен...»"
                )
            },
            2: {
                "name": "Уровень 2: Дух Пыльной Библиотеки", 
                "story": (
                    "Дух: Юная Студентка-Отличница Лиза.\n\n"
                    "Она так боялась выпускных экзаменов и перемен в жизни, что заснула над учебниками и больше не проснулась. "
                    "Ее дух цеплялся за иллюзию постоянства и подготовки."
                ),
                "completion_message": (
                    "Вторая Руна. Запись в ее дневнике: "
                    "«Он обещал, что после последней страницы наступит покой. Он солгал.»"
                )
            },
            3: {
                "name": "Уровень 3: Дух Заводского Цеха",
                "story": (
                    "Дух: Усталый Рабочий Борис.\n\n"
                    "Он 30 лет работал на одном месте, мечтая о море, но так и не нашел времени поехать. "
                    "Он погиб в результате несчастного случая на производстве, а его дух продолжал приходить 'на смену'."
                ),
                "completion_message": (
                    "Освободив его, вы получаете Руну и обрывок мысли: "
                    "«Мастер тьмы ищет сильных. Он строит легион из освобожденных...»"
                )
            },
            4: {
                "name": "Уровень 4: Дух Заброшенной Оранжереи",
                "story": (
                    "Дух: Молчаливая Садовница Флора.\n\n"
                    "Она вырастила уникальный цветок акации для своего возлюбленного, ушедшего на войну. "
                    "Он так и не вернулся. Она умерла от тоски, а ее дух охранял оранжерею, веря, что он однажды придет."
                ),
                "completion_message": (
                    "Руна и засохший лепесток. "
                    "«Он говорил, что ее аромат проведет его домой. Но пришел не он.»"
                )
            }
            # ... добавить остальные уровни
        }
        return stories.get(level, {})
    
    @staticmethod
    def get_victory_message() -> str:
        return (
            "Поздравляю! Ты прошел все уровни и разгадал тайну Царства Эха. "
            "Ты освободил души и восстановил баланс. Теперь твоя очередь стать наставником для нового неофита..."
        )